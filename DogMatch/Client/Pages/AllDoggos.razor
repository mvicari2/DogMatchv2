@page "/AllDoggos"
@using Microsoft.AspNetCore.Authorization
@using DogMatch.Client.Services
@using DogMatch.Client.Components.Dog

@attribute [Authorize]
@inject DogState state

<AuthorizeView>
    <Authorized>
        <MatH2>All Doggos</MatH2>
        <br />
        <DogsList Dogs="state.Doggos" />
    </Authorized>
</AuthorizeView>

@code {
    protected override async Task OnInitializedAsync()
    {
        await state.GetAllDoggos();
        state.OnChange += RefreshComponent;
    }

    private void RefreshComponent() => StateHasChanged();
}
