@page "/DoggoProfile/{id:int}"
@using Microsoft.AspNetCore.Authorization
@using DogMatch.Client.Services
@using DogMatch.Client.Components.DogProfile

@attribute [Authorize]
@inject DogProfileState state

<AuthorizeView>
    <Authorized>
        <MatH2>@state.Profile?.Dog?.Name</MatH2>
        <br />

        @if (state.Profile?.Dog == null)
        {
            <div class="col-lg-12">
                <Flow Size="200px" Color="#003366" Center="true" />
            </div>
        }
        else
        {
            <DogCard />

            @if (state.Profile?.Dog?.Owner == context.User.Identity.Name)
            {
                <div class="center-align">
                    <ProfileNavigator DogId="state.Profile?.Dog?.Id ?? 0" />
                    <br />
                    <DeleteProfile DogId="state.Profile?.Dog?.Id ?? 0" DogName="@state.Profile?.Dog?.Name" />
                </div>
            }
        }
        <br />
    </Authorized>
</AuthorizeView>

@code {
    [Parameter]
    public int Id { get; set; }

    protected override async Task OnInitializedAsync() => await state.GetDoggo(Id);
}
