@using DogMatch.Shared.Models
@using DogMatch.Client.Services

@inject NavigationService navigate

@if (Dogs == null)
{
    <div class="col-lg-12">
        <Flow Size="200px" Color="#003366" Center="true" />
    </div>
}
else if (Dogs.Count() < 1)
{
    <div class="center-align">
        <MatH5>
            <MatIcon Icon="pets" Class="icon-align" />
            No Doggos Found.
            <MatIcon Icon="pets" Class="icon-align" />
            <br />
            <a href="CreateDoggo">Click Here</a> to Create a New Profile For Your Dog.
        </MatH5>
    </div>
}

<AuthorizeView>
    <Authorized>
        <RadzenDataList WrapItems="true"
                        AllowPaging="true"
                        Data="@Dogs"
                        TItem="DogMatch.Shared.Models.Dog"
                        PageSize="9">
            <Template Context="dog">
                <RadzenCard Style="width:300px;">
                    <img src="@dog.ProfileImage"
                         style="width:auto; height: 250px" />
                    <div class="inline-center-row">
                        <b>@dog.Name</b>
                    </div>
                    <div class="row inline-center-row">
                        <div class="col-md-12">
                            @if (dog.Owner == context.User.Identity.Name)
                            {
                                <OwnerMenuBtn DogId="dog.Id"
                                              DogName="@dog.Name"
                                              BtnStyle="width:100%;" />
                            }
                            else
                            {
                                <button type="button"
                                        class="btn btn-primary"
                                        style="width: 100%"
                                        @onclick="@(e => navigate.ToProfile(dog.Id))">
                                    VIEW PROFILE
                                </button>
                            }
                        </div>
                    </div>
                    <div class="row center-align">
                        <div class="col-md-6">
                            <div style="margin-top:20px">Breed:</div>
                            <b>@dog.Breed</b>
                            <br />
                            <div style="margin-top:20px">Gender:</div>
                            <b>@dog.Gender</b>
                        </div>
                        <div class="col-md-6">
                            <div style="margin-top:20px">Weight:</div>
                            <b>@dog.Weight</b>
                            <div style="margin-top:20px">Birthday/Age</div>
                            @if (dog.Birthday.HasValue)
                            {
                                <b>@dog.Birthday.Value.ToShortDateString() <br /> @dog.Age</b>
                            }
                        </div>
                    </div>
                    <div class="row inline-center-row">
                        <div>Owner</div>
                        <b>@dog.Owner</b>
                    </div>
                    <br />

                </RadzenCard>
            </Template>
        </RadzenDataList>
    </Authorized>
</AuthorizeView>

@code {
    [Parameter]
    public IEnumerable<Dog> Dogs { get; set; }
}
